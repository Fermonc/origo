(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39497,e=>{"use strict";var a=e.i(43476),c=e.i(37902),s=e.i(71645),r=e.i(18566),i=e.i(58652),n=e.i(5513),t=e.i(21052);e.i(36180);var d=e.i(98925),o=e.i(22016);function l(){let{user:e,loading:l}=(0,i.useAuth)(),{addToast:m}=(0,n.useToast)(),x=(0,r.useRouter)(),[j,g]=(0,s.useState)([]),[p,f]=(0,s.useState)(!0);(0,s.useEffect)(()=>{l||e||x.push("/admin/login")},[e,l,x]),(0,s.useEffect)(()=>{if(e){let e=(0,d.query)((0,d.collection)(t.db,"messages"),(0,d.orderBy)("createdAt","desc")),a=(0,d.onSnapshot)(e,e=>{g(e.docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate?e.data().createdAt.toDate():new Date(e.data().createdAt)}))),f(!1)},e=>{console.error("Error fetching messages:",e),f(!1),m("Error al cargar mensajes","error")});return()=>a()}},[e,m]);let h=async e=>{try{await (0,d.updateDoc)((0,d.doc)(t.db,"messages",e.id),{read:!e.read})}catch(e){console.error("Error updating message:",e),m("Error al actualizar estado","error")}},u=async e=>{if(confirm("Â¿Eliminar este mensaje permanentemente?"))try{await (0,d.deleteDoc)((0,d.doc)(t.db,"messages",e)),m("Mensaje eliminado","success")}catch(e){console.error("Error deleting message:",e),m("Error al eliminar mensaje","error")}};return l||!e?(0,a.jsx)("div",{className:"loading-screen",children:(0,a.jsx)("div",{className:"spinner"})}):(0,a.jsxs)("div",{className:"jsx-8cc7c42929494a98 admin-page",children:[(0,a.jsx)("header",{className:"jsx-8cc7c42929494a98 admin-header",children:(0,a.jsxs)("div",{className:"jsx-8cc7c42929494a98 container header-container",children:[(0,a.jsx)(o.default,{href:"/admin/dashboard",className:"back-link",children:"â† Volver al Panel"}),(0,a.jsx)("h1",{className:"jsx-8cc7c42929494a98",children:"Mensajes y Leads"}),(0,a.jsx)("div",{style:{width:"100px"},className:"jsx-8cc7c42929494a98"})]})}),(0,a.jsx)("main",{className:"jsx-8cc7c42929494a98 container main-content",children:p?(0,a.jsx)("div",{className:"jsx-8cc7c42929494a98 loading-grid",children:"Cargando mensajes..."}):0===j.length?(0,a.jsxs)("div",{className:"jsx-8cc7c42929494a98 empty-state",children:[(0,a.jsx)("div",{className:"jsx-8cc7c42929494a98 empty-icon",children:"ðŸ“­"}),(0,a.jsx)("h3",{className:"jsx-8cc7c42929494a98",children:"No hay mensajes nuevos"})]}):(0,a.jsx)("div",{className:"jsx-8cc7c42929494a98 messages-list",children:j.map(e=>(0,a.jsxs)("div",{className:`jsx-8cc7c42929494a98 message-card ${e.read?"read":"unread"}`,children:[(0,a.jsxs)("div",{className:"jsx-8cc7c42929494a98 message-header",children:[(0,a.jsxs)("div",{className:"jsx-8cc7c42929494a98 sender-info",children:[(0,a.jsx)("h3",{className:"jsx-8cc7c42929494a98 sender-name",children:e.name}),(0,a.jsx)("span",{className:"jsx-8cc7c42929494a98 sender-email",children:e.email})]}),(0,a.jsxs)("div",{className:"jsx-8cc7c42929494a98 message-meta",children:[(0,a.jsxs)("span",{className:"jsx-8cc7c42929494a98 msg-date",children:[e.createdAt.toLocaleDateString()," ",e.createdAt.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,a.jsxs)("div",{className:"jsx-8cc7c42929494a98 actions",children:[(0,a.jsx)("button",{onClick:()=>h(e),title:e.read?"Marcar como no leÃ­do":"Marcar como leÃ­do",className:"jsx-8cc7c42929494a98 btn-icon",children:e.read?"ðŸ“©":"ðŸ‘€"}),(0,a.jsx)("button",{onClick:()=>u(e.id),title:"Eliminar",className:"jsx-8cc7c42929494a98 btn-icon delete",children:"ðŸ—‘ï¸"})]})]})]}),(0,a.jsx)("div",{className:"jsx-8cc7c42929494a98 message-body",children:(0,a.jsx)("p",{className:"jsx-8cc7c42929494a98",children:e.message})}),!e.read&&(0,a.jsx)("div",{className:"jsx-8cc7c42929494a98 unread-dot"})]},e.id))})}),(0,a.jsx)(c.default,{id:"8cc7c42929494a98",children:".admin-page.jsx-8cc7c42929494a98{background-color:#f8fafc;min-height:100vh}.admin-header.jsx-8cc7c42929494a98{z-index:100;background:#fff;border-bottom:1px solid #e2e8f0;margin-bottom:2rem;padding:1rem 0;position:sticky;top:0}.header-container.jsx-8cc7c42929494a98{justify-content:space-between;align-items:center;display:flex}h1.jsx-8cc7c42929494a98{color:#0f172a;margin:0;font-size:1.25rem;font-weight:700}.back-link.jsx-8cc7c42929494a98{color:#64748b;border-radius:8px;padding:.5rem 1rem;font-size:.9rem;font-weight:500;text-decoration:none;transition:background .2s}.back-link.jsx-8cc7c42929494a98:hover{color:#0f172a;background:#f1f5f9}.main-content.jsx-8cc7c42929494a98{max-width:800px;padding-bottom:4rem}.messages-list.jsx-8cc7c42929494a98{flex-direction:column;gap:16px;display:flex}.message-card.jsx-8cc7c42929494a98{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:20px;transition:all .2s;position:relative;box-shadow:0 1px 3px #0000000d}.message-card.unread.jsx-8cc7c42929494a98{background:#fff;border-left:4px solid #3b82f6}.unread-dot.jsx-8cc7c42929494a98{background:#3b82f6;border-radius:50%;width:8px;height:8px;position:absolute;top:20px;right:20px}.message-header.jsx-8cc7c42929494a98{justify-content:space-between;align-items:flex-start;margin-bottom:12px;display:flex}.sender-name.jsx-8cc7c42929494a98{color:#0f172a;margin:0 0 4px;font-size:1.1rem;font-weight:700}.sender-email.jsx-8cc7c42929494a98{color:#64748b;font-size:.9rem}.message-meta.jsx-8cc7c42929494a98{flex-direction:column;align-items:flex-end;gap:8px;display:flex}.msg-date.jsx-8cc7c42929494a98{color:#94a3b8;font-size:.8rem}.actions.jsx-8cc7c42929494a98{gap:8px;display:flex}.btn-icon.jsx-8cc7c42929494a98{cursor:pointer;background:0 0;border:none;border-radius:4px;padding:4px;font-size:1.1rem;transition:background .2s}.btn-icon.jsx-8cc7c42929494a98:hover{background:#f1f5f9}.message-body.jsx-8cc7c42929494a98{color:#334155;white-space:pre-wrap;font-size:.95rem;line-height:1.5}.empty-state.jsx-8cc7c42929494a98{text-align:center;background:#fff;border:2px dashed #e2e8f0;border-radius:20px;padding:60px}.empty-icon.jsx-8cc7c42929494a98{opacity:.5;margin-bottom:16px;font-size:3rem}.loading-screen.jsx-8cc7c42929494a98{justify-content:center;align-items:center;height:100vh;display:flex}.spinner.jsx-8cc7c42929494a98{border:3px solid #f3f3f3;border-top-color:#0f172a;border-radius:50%;width:40px;height:40px;animation:1s linear infinite spin}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"})]})}e.s(["default",()=>l])}]);