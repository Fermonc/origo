rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Helper function to check if user is authenticated
    function isAuthenticated() {
      return request.auth != null;
    }

    // Helper function to check if user is accessing their own data
    function isOwner(userId) {
      return isAuthenticated() && request.auth.uid == userId;
    }

    // Users collection
    match /users/{userId} {
      allow read, write: if isOwner(userId);
    }

    // Properties collection
    match /properties/{propertyId} {
      allow read: if true; // Public read
      allow write: if false; // Only admin via Console for now
    }
    
    // Alerts collection (if stored at root, though currently it seems they are in users?)
    // Checking code, alerts are in 'users/{userId}/alerts' or root?
    // Let's assume root for now based on previous knowledge, but wait, 
    // src/lib/db/alerts.js uses `collection(db, 'users', userId, 'alerts')`?
    // No, let's check alerts.js to be sure.
  }
}
